# 更新日志

本项目的所有显著变更都将记录在此文件中。
格式以 [保存更改日志](https://keepachangelog.com/zh-CN/1.1.0/) 为基础。

## [未发布 v1.0] - 2024-09-15

基于 UE4SS MOD 框架编写了 MOD，配合 sig-a11y/tolk 适配各种屏幕阅读器，输出到 NVDA。
开源地址: github.com/game-a11y/BlackMyth-A11y
主要适配手柄，目前可以做到识别焦点控件的文本。
这个视频用来测试配置菜单的无障碍输出。

目前看大部分配置菜单的信息都可以输出。下一步的计划是，适配游戏内的背包界面。
至于游戏的战斗系统、自动寻路等问题，目前技术力不够，也没有好的想法，有待进一步讨论。

### 添加

- v1.0 添加 Tolk 以适配各种屏幕阅读器
- v1.0 支持 NVDA
- v1.0 将 Tolk.speak 导出到 LUA Mod: A11yTolk 模块
- v1.0 可以获取焦点文本
- v1.0 可获取并输出中文、英文文本
- v1.0 无障碍适配大部分设置菜单
- v1.0 读取存档信息
- v1.0 部分读取键盘键位配置

### 修复

无

### 移除

无

### 已知问题

- 原地修改配置项后，需要切换到其他配置项然后切回来。这个是目前的技术限制，只有文本获得焦点才会输出；
- 下拉菜单选项尚不能输出。这个在开发计划中了；
- 部分第三级、有单独弹窗/页面的配置项，尚不能输出，比如键盘配置。这个是开发优先级问题，目前暂缓；
- 技术问题：hook 到聚焦函数后，很多按钮会触发两次聚焦事件（看日志能看见两条相同的输出），尚不知道原因，但目前不影响使用；
- 技术问题：因为涉及到：游戏本体-mod框架-cpp接口-tolk-屏幕阅读器等多个部分联动，目前开发版不是很稳定，偶尔会导致游戏崩溃，然后存档丢失。有待进一步测试后再放出 v1.0 的MOD补丁包
- 技术问题：无法读取当前键盘键位配置，文本字段只能读取到固定值 W，按键图标尚不知道解析方式
- 首次开启，语言设置、亮度设置，手柄按A；用户协议，手柄右摇杆向下到底，然后按 A 确定
